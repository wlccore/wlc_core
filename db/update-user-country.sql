--
-- 14.04.2017
--
CREATE TEMPORARY TABLE `countries_iso` (
  `Iso2` char(2) NOT NULL,
  `Iso3` char(3) NOT NULL,
  PRIMARY KEY (`Iso2`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO  `countries_iso` (`Iso2`, `Iso3`) VALUES
  ('au', 'aux'),
  ('at', 'aut'),
  ('az', 'aze'),
  ('al', 'alb'),
  ('dz', 'dza'),
  ('as', 'asm'),
  ('ai', 'aia'),
  ('ao', 'ago'),
  ('ad', 'and'),
  ('ag', 'atg'),
  ('ar', 'arg'),
  ('am', 'arm'),
  ('aw', 'abw'),
  ('af', 'afg'),
  ('bs', 'bhs'),
  ('bd', 'bgd'),
  ('bb', 'brb'),
  ('bh', 'bhr'),
  ('by', 'blr'),
  ('bz', 'blz'),
  ('be', 'bel'),
  ('bj', 'ben'),
  ('bm', 'bmu'),
  ('bg', 'bgr'),
  ('bo', 'bol'),
  ('ba', 'bih'),
  ('bw', 'bwa'),
  ('br', 'bra'),
  ('bn', 'brn'),
  ('bf', 'bfa'),
  ('bi', 'bdi'),
  ('bt', 'btn'),
  ('vu', 'vut'),
  ('hu', 'hun'),
  ('ve', 'ven'),
  ('vg', 'vgb'),
  ('vi', 'vir'),
  ('tl', 'tls'),
  ('vn', 'vnm'),
  ('ga', 'gab'),
  ('ht', 'hti'),
  ('gy', 'guy'),
  ('gm', 'gmb'),
  ('gh', 'gha'),
  ('gp', 'glp'),
  ('gt', 'gtm'),
  ('gn', 'gin'),
  ('gw', 'gnb'),
  ('de', 'deu'),
  ('gi', 'gib'),
  ('hn', 'hnd'),
  ('hk', 'hkg'),
  ('gd', 'grd'),
  ('gl', 'grl'),
  ('gr', 'grc'),
  ('ge', 'geo'),
  ('gu', 'gum'),
  ('dk', 'dnk'),
  ('dj', 'dji'),
  ('dm', 'dma'),
  ('do', 'dom'),
  ('eg', 'egy'),
  ('zm', 'zmb'),
  ('eh', 'esh'),
  ('zw', 'zwe'),
  ('il', 'isr'),
  ('in', 'ind'),
  ('id', 'idn'),
  ('jo', 'jor'),
  ('iq', 'irq'),
  ('ir', 'irn'),
  ('ie', 'irl'),
  ('is', 'isl'),
  ('es', 'esp'),
  ('it', 'ita'),
  ('ye', 'yem'),
  ('cv', 'cpv'),
  ('kz', 'kaz'),
  ('kh', 'khm'),
  ('cm', 'cmr'),
  ('ca', 'can'),
  ('qa', 'qat'),
  ('ke', 'ken'),
  ('cy', 'cyp'),
  ('kg', 'kgz'),
  ('ki', 'kir'),
  ('cn', 'chn'),
  ('cc', 'cck'),
  ('co', 'col'),
  ('km', 'com'),
  ('cg', 'cog'),
  ('cd', 'cod'),
  ('kp', 'prk'),
  ('kr', 'kor'),
  ('cr', 'cri'),
  ('ci', 'civ'),
  ('cu', 'cub'),
  ('kw', 'kwt'),
  ('la', 'lao'),
  ('lv', 'lva'),
  ('ls', 'lso'),
  ('lr', 'lbr'),
  ('lb', 'lbn'),
  ('ly', 'lby'),
  ('lt', 'ltu'),
  ('li', 'lie'),
  ('lu', 'lux'),
  ('mu', 'mus'),
  ('mr', 'mrt'),
  ('mg', 'mdg'),
  ('mo', 'mac'),
  ('mk', 'mkd'),
  ('mw', 'mwi'),
  ('my', 'mys'),
  ('ml', 'mli'),
  ('mv', 'mdv'),
  ('mt', 'mlt'),
  ('ma', 'mar'),
  ('mq', 'mtq'),
  ('mh', 'mhl'),
  ('mx', 'mex'),
  ('fm', 'fsm'),
  ('mz', 'moz'),
  ('md', 'mda'),
  ('mc', 'mco'),
  ('mn', 'mng'),
  ('ms', 'msr'),
  ('mm', 'mmr'),
  ('na', 'nam'),
  ('nr', 'nru'),
  ('np', 'npl'),
  ('ne', 'ner'),
  ('ng', 'nga'),
  ('an', 'ant'),
  ('nl', 'nld'),
  ('ni', 'nic'),
  ('nu', 'niu'),
  ('nz', 'nzl'),
  ('nc', 'ncl'),
  ('no', 'nor'),
  ('ae', 'are'),
  ('om', 'omn'),
  ('bv', 'bvt'),
  ('im', 'imn'),
  ('nf', 'nfk'),
  ('hm', 'hmd'),
  ('ky', 'cym'),
  ('ck', 'cok'),
  ('tc', 'tca'),
  ('wf', 'wlf'),
  ('pk', 'pak'),
  ('pw', 'plw'),
  ('ps', 'pse'),
  ('pa', 'pan'),
  ('va', 'vat'),
  ('pg', 'png'),
  ('py', 'pry'),
  ('pe', 'per'),
  ('pn', 'pcn'),
  ('pl', 'pol'),
  ('pt', 'prt'),
  ('pr', 'pri'),
  ('re', 'reu'),
  ('ru', 'rus'),
  ('rw', 'rwa'),
  ('ro', 'rom'),
  ('sv', 'slv'),
  ('ws', 'wsm'),
  ('sm', 'smr'),
  ('st', 'stp'),
  ('sa', 'sau'),
  ('sz', 'swz'),
  ('sh', 'shn'),
  ('mp', 'mnp'),
  ('rs', 'srb'),
  ('sc', 'syc'),
  ('sn', 'sen'),
  ('vc', 'vct'),
  ('kn', 'kna'),
  ('lc', 'lca'),
  ('pm', 'spm'),
  ('sg', 'sgp'),
  ('sy', 'syr'),
  ('sk', 'svk'),
  ('si', 'svn'),
  ('gb', 'gbr'),
  ('us', 'usa'),
  ('sb', 'slb'),
  ('so', 'som'),
  ('sd', 'sdn'),
  ('sr', 'sur'),
  ('sl', 'sle'),
  ('tj', 'tjk'),
  ('th', 'tha'),
  ('tw', 'twn'),
  ('tz', 'tza'),
  ('tg', 'tgo'),
  ('tk', 'tkl'),
  ('to', 'ton'),
  ('tt', 'tto'),
  ('tv', 'tuv'),
  ('tn', 'tun'),
  ('tm', 'tkm'),
  ('tr', 'tur'),
  ('ug', 'uga'),
  ('uz', 'uzb'),
  ('ua', 'ukr'),
  ('uy', 'ury'),
  ('fo', 'fro'),
  ('fj', 'fji'),
  ('ph', 'phl'),
  ('fi', 'fin'),
  ('fk', 'flk'),
  ('fr', 'fra'),
  ('gf', 'guf'),
  ('pf', 'pyf'),
  ('hr', 'hrv'),
  ('cf', 'caf'),
  ('td', 'tcd'),
  ('cz', 'cze'),
  ('cl', 'chl'),
  ('ch', 'che'),
  ('se', 'swe'),
  ('sj', 'sjm'),
  ('lk', 'lka'),
  ('ec', 'ecu'),
  ('gq', 'gnq'),
  ('er', 'eri'),
  ('ee', 'est'),
  ('et', 'eth'),
  ('za', 'zaf'),
  ('jm', 'jam'),
  ('jp', 'jpn'),
  ('aq', 'ata'),
  ('io', 'iot'),
  ('gg', 'ggy'),
  ('je', 'jey'),
  ('yt', 'myt'),
  ('um', 'umi'),
  ('ac', 'asc'),
  ('cx', 'cxr'),
  ('me', 'mne');

UPDATE users u
  INNER JOIN countries_iso c ON ( upper(u.country)=upper(c.Iso2) )
SET u.country=c.Iso3;

DROP TEMPORARY TABLE countries_iso;